
# Домашнее задание к занятию «Микросервисы: масштабирование» Голоха Е.В.

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- поддержка контейнеров;
- обеспечивать обнаружение сервисов и маршрутизацию запросов;
- обеспечивать возможность горизонтального масштабирования;
- обеспечивать возможность автоматического масштабирования;
- обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
- обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.



## Решение
1. [Задача 1: Кластеризация](#cluster)

---

## <a id="cluster">Задача 1: Кластеризация</a>

### Условия задачи
Необходимо предложить решение для обеспечения развёртывания, запуска и управления приложениями
в микросервисной архитектуре с учётом требований масштабирования и изоляции ресурсов.

---

### Требования
- поддержка контейнеров;
- обнаружение сервисов и маршрутизация запросов;
- горизонтальное масштабирование;
- автоматическое масштабирование;
- явное разделение ресурсов, доступных извне и внутри системы;
- конфигурация приложений через переменные среды;
- безопасное хранение чувствительных данных (пароли, ключи, токены).

---

## Предлагаемое решение
**Kubernetes + Ingress Controller + Horizontal Pod Autoscaler + ConfigMap / Secret**

---

## Архитектура взаимодействия

- **Docker** — упаковка микросервисов в контейнеры  
- **Kubernetes (K8s)** — оркестрация, управление жизненным циклом контейнеров  
- **Service (ClusterIP / NodePort / LoadBalancer)** — сервис-дискавери и балансировка  
- **Ingress Controller** — маршрутизация внешних HTTP(S)-запросов  
- **HPA (Horizontal Pod Autoscaler)** — автоматическое горизонтальное масштабирование  
- **ConfigMap** — конфигурация приложений  
- **Secret** — безопасное хранение чувствительных данных  

---

## Соответствие требованиям

| Требование | Реализация в Kubernetes |
|---|---|
| Поддержка контейнеров | Docker + Kubernetes Pods |
| Обнаружение сервисов | Kubernetes Service + DNS |
| Маршрутизация запросов | Service + Ingress Controller |
| Горизонтальное масштабирование | ReplicaSet / Deployment |
| Автоматическое масштабирование | HPA (CPU / custom metrics) |
| Разделение внешних и внутренних ресурсов | Ingress (external) / ClusterIP (internal) |
| Конфигурация через переменные среды | ConfigMap |
| Безопасное хранение секретов | Kubernetes Secret |

---

## Обоснование выбора

### 1. Поддержка контейнеров
Kubernetes является стандартом де-факто для управления контейнеризированными приложениями
и нативно работает с Docker/OCI-контейнерами.

---

### 2. Обнаружение сервисов и маршрутизация
Каждый сервис в Kubernetes автоматически получает DNS-имя.  
Ingress Controller обеспечивает маршрутизацию внешних запросов и позволяет:
- разделять внешний и внутренний трафик;
- централизованно управлять HTTPS и правилами доступа.

---

### 3. Горизонтальное и автоматическое масштабирование
- **Deployment + ReplicaSet** позволяют вручную масштабировать количество экземпляров сервисов;
- **HPA** автоматически масштабирует поды на основе метрик (CPU, RAM, custom metrics).

Это позволяет системе адаптироваться к нагрузке без ручного вмешательства.

---

### 4. Разделение внешних и внутренних ресурсов
- **Ingress** — единая точка входа извне;
- **ClusterIP-сервисы** — полностью изолированы внутри кластера;
- при необходимости возможно использование отдельных namespace для изоляции окружений (dev/stage/prod).

---

### 5. Конфигурация и безопасность
- **ConfigMap** — хранение некритичных параметров конфигурации;
- **Secret** — безопасное хранение паролей, ключей доступа и токенов;
- передача данных в контейнеры осуществляется через переменные среды или volume-монты.

---

### 6. Эксплуатация и масштабируемость
Kubernetes:
- хорошо автоматизируется (IaC, GitOps);
- поддерживается большинством облачных провайдеров;
- масштабируется от нескольких сервисов до сотен микросервисов;
- является промышленным стандартом для микросервисной архитектуры.

---

## Мини-схема работы

Пользователь  
→ Ingress Controller (HTTPS)  
→ Kubernetes Service  
→ Pods (микросервисы)  
→ ConfigMap / Secret  

---

## Чек-лист выполнения требований

- [x] Контейнеризация
- [x] Service Discovery
- [x] Горизонтальное масштабирование
- [x] Автоматическое масштабирование
- [x] Разделение внешнего и внутреннего трафика
- [x] Переменные среды
- [x] Безопасное хранение секретов

---

## Итог
Для решения задачи кластеризации и масштабирования микросервисной архитектуры
оптимальным выбором является **Kubernetes**.

Данное решение полностью покрывает требования задания и подходит для промышленной эксплуатации
в крупной компании.
